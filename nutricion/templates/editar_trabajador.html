{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Trabajador - {{ form.instance.nombre }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'nutricion/css/editar_trabajador.css' %}">
{% endblock %}

{% block content %}
<div class="editar-trabajador-container">
    <div class="card">
        <div class="card-header">
            <h2><i class="fas fa-user-edit"></i> Editar Trabajador: {{ form.instance.nombre }}</h2>
        </div>
        
        <div class="card-body">
            <form method="POST" class="trabajador-form">
                {% csrf_token %}

                <div class="form-group">
                    <label for="{{ form.nombre.id_for_label }}">{{ form.nombre.label }}</label>
                    {{ form.nombre }}
                    {% for error in form.nombre.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.curp.id_for_label }}">{{ form.curp.label }}</label>
                    {{ form.curp }}
                    {% for error in form.curp.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.cargo.id_for_label }}">{{ form.cargo.label }}</label>
                    {{ form.cargo }}
                    {% for error in form.cargo.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.departamento.id_for_label }}">{{ form.departamento.label }}</label>
                    {{ form.departamento }}
                    {% for error in form.departamento.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.cai.id_for_label }}">{{ form.cai.label }}</label>
                    {{ form.cai }}
                    {% for error in form.cai.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.peso.id_for_label }}">{{ form.peso.label }}</label>
                    {{ form.peso }}
                    {% for error in form.peso.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.talla.id_for_label }}">{{ form.talla.label }}</label>
                    {{ form.talla }}
                    {% for error in form.talla.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.imc.id_for_label }}">{{ form.imc.label }}</label>
                    {{ form.imc }}
                    {% for error in form.imc.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.circunferencia_abdominal.id_for_label }}">{{ form.circunferencia_abdominal.label }}</label>
                    {{ form.circunferencia_abdominal }}
                    {% for error in form.circunferencia_abdominal.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.enfermedades_preexistentes.id_for_label }}">{{ form.enfermedades_preexistentes.label }}</label>
                    {{ form.enfermedades_preexistentes }}
                    {% for error in form.enfermedades_preexistentes.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-group">
                    <label for="{{ form.observaciones.id_for_label }}">{{ form.observaciones.label }}</label>
                    {{ form.observaciones }}
                    {% for error in form.observaciones.errors %}
                        <div class="error-message">{{ error }}</div>
                    {% endfor %}
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-save">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                    
                    {% with cancel_url_name=cancel_url|default:'historial' %}
                        <a href="{% url cancel_url_name %}" class="btn btn-cancel">
                            <i class="fas fa-times-circle"></i> Cancelar
                        </a>
                    {% endwith %}
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}